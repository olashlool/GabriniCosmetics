var SmartDealCarousel={carouseldetailsurl:"",containerselector:"",loaderselector:"",loadwait:!0,localized_data:!1,init:function(n,t,i,r){this.carouseldetailsurl=n;this.containerselector=t;this.loaderselector=i;this.localized_data=r;this.loadwait=!0;SmartDealCarousel.check_carousels();$(window).scroll(function(){SmartDealCarousel.loadwait||SmartDealCarousel.check_carousels()})},check_carousels:function(){$(SmartDealCarousel.containerselector+'[data-loaded!="true"]').each(function(){var n=$(this),t;SmartDealCarousel.chek_element_on_screen(n)&&(n.data("loading")||(n.attr("data-loading",!0),t=n.data("dealcarouselid"),SmartDealCarousel.load_carousel_details(t)))});SmartDealCarousel.loadwait=!1},chek_element_on_screen:function(n){var t=$(window).scrollTop(),r=t+$(window).height(),i=n.offset().top,u=i+n.height();return u<=r&&u>=t||i<=r&&i>=t},load_carousel_details:function(n){$.ajax({cache:!1,type:"POST",data:{carouselId:n},url:SmartDealCarousel.carouseldetailsurl,success:function(t){var i=$(SmartDealCarousel.containerselector+'[data-dealcarouselid="'+n+'"]');t.result?i.html(t.html):i.html(SmartDealCarousel.localized_data.SmartDealCarouselFailure);i.attr("data-loaded",!0);i.removeClass("carousel-container");i.removeAttr("data-loading")},error:SmartDealCarousel.ajaxFailure})},ajaxFailure:function(){$(SmartDealCarousel.containerselector).html(SmartDealCarousel.localized_data.SmartDealCarouselFailure)}};
