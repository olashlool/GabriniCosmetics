function createProductsURLBuilder(n){return{params:{basePath:n,query:{}},addBasePath:function(n){return this.params.basePath=n,this},addParameter:function(n,t){return this.params.query[n]=t,this},build:function(){var t=$.param(this.params.query),n=this.params.basePath;return n.indexOf("?")!==-1?n+"&"+t:n+"?"+t}}}var CatalogProducts={settings:{ajax:!1,fetchUrl:!1,browserPath:!1},params:{jqXHR:!1},init:function(n){this.settings=$.extend({},this.settings,n)},getProducts:function(n){var t,r,i;this.params.jqXHR&&this.params.jqXHR.readyState!==4&&this.params.jqXHR.abort();t=createProductsURLBuilder(this.settings.browserPath);n&&t.addParameter("pagenumber",n);r={urlBuilder:t};$(this).trigger({type:"before",payload:r});this.setBrowserHistory(t.build());this.settings.ajax?(this.setLoadWaiting(1),i=this,this.params.jqXHR=$.ajax({cache:!1,url:t.addBasePath(this.settings.fetchUrl).build(),type:"GET",success:function(n){$(".products-wrapper").html(n);$("html, body").animate({scrollTop:$(".center-2 .page").offset().top-$(".header-wrapper").height()},"slow");$(i).trigger({type:"loaded"})},error:function(){$(i).trigger({type:"error"})},complete:function(){i.setLoadWaiting()}})):setLocation(t.build())},setLoadWaiting(n){var t=$(".ajax-products-busy");n?t.show():t.hide()},setBrowserHistory(n){window.history.replaceState({path:n},"",n)}};
