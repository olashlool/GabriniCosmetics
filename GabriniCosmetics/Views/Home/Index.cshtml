@model GabriniCosmetics.Models.ViewModel.HomeVM

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
@{
    string culture = System.Threading.Thread.CurrentThread.CurrentUICulture.Name;
}

<div class="master-column-wrapper" style="display:block">
    <div class="center-1">
        <div class="page home-page">
            <div class="page-body">

                <!-- Carousel Sliders Banner -->
                <div class="slider-grid">
                    <div class="slider-container">
                        <div class="swiper slider" id="slider-banner">
                            <div class="swiper-wrapper">
                                @foreach (var item in Model.SlidersBanner)
                                {
                                    <div class="swiper-slide">
                                        <div class="slider-image swiper-zoom-container">
                                            <img src="~/uploads/@item.ImageUrl" title="" alt="">
                                        </div>
                                    </div>
                                }
                            </div>
                            <div class="swiper-button-next"></div>
                            <div class="swiper-button-prev"></div>
                        </div>
                    </div>
                </div>
                <!-- End Carousel Sliders Banner -->

                <!-- Carousel Category -->
                <div class="carousel-grid carousel-category">
                    <div class="carousel-grid-container">
                        <div class="carousel-title"><strong>@Localizer["FeaturedCategories"]</strong></div>
                        <div class="" data-carouselid="1" data-loaded="true">
                            <div class="swiper-button-next swiper-next" tabindex="0" role="button" aria-label="Next slide" aria-controls="swiper-wrapper"></div>
                            <div class="swiper-button-prev swiper-prev" tabindex="0" role="button" aria-label="Previous slide" aria-controls="swiper-wrapper"></div>
                            <div class="swiper carousel swiper-initialized swiper-horizontal swiper-backface-hidden" id="ocarousel">
                                <div class="swiper-wrapper item-grid" id="swiper-wrapper" aria-live="off">
                                    @foreach (var item in Model.Categories)
                                    {
                                        var name = culture.StartsWith("en") ? item.NameEn : item.NameAr;
                                        <div class="item-box swiper-slide" role="group">
                                            <div class="category-item">
                                                <div class="title">
                                                    <a asp-controller="Categories" asp-action="index" asp-route-id="@item.Id">@name</a>
                                                </div>
                                                <div class="picture">
                                                    <a asp-controller="Categories" asp-action="index" asp-route-id="@item.Id" title="@Localizer["ShowDetailsFor"] @name">
                                                        <img alt="@Localizer["PictureOf"] @name" src="~/uploads/@item.ImageUpload" title="@Localizer["ShowDetailsFor"] @name">
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>
                                <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Carousel Category -->

                <!-- Deal Of The Day -->
                <div class="dealoftheday-container dealoftheday-wrapper left bg-class" style="background:url('images/GabriniCosmetics/slider-sale.png') no-repeat center;background-size:cover">
                    <div class="container">
                        <div class="dealoftheday-content row">
                            <div class="dealoftheday-leftadd">
                                <div class="deals-image">
                                    <div class="swiper slider" id="deal-carousel-picture">
                                        <div class="swiper-wrapper">
                                            <div class="swiper-slide">
                                                <div class="slider-image">
                                                    <a>
                                                        <img src="~/@Model.DealOfTheDays.FirstOrDefault().ImageUpload" alt="">
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="carousel-countdown icon-clock">
                                    <div id="countdown"></div>
                                </div>
                                @{
                                    // Ensure the date is in a correct format for JavaScript
                                    var endTimeString = Model.DealOfTheDays.First().EndTime.ToString("yyyy-MM-ddTHH:mm:ss");

                                    // Define localized strings
                                    var localizedDays = Localizer["days"];
                                    var localizedHours = Localizer["hours"];
                                    var localizedMinutes = Localizer["minutes"];
                                    var localizedSeconds = Localizer["seconds"];
                                    var localizedCountdownExpired = Localizer["CountdownExpired"];
                                }
                                <div id="countdown"></div> <!-- Ensure this element exists in your HTML -->

                                <script>
                                    // Function to calculate and display the countdown
                                    function updateCountdown() {
                                        // Use the Razor variable to get the end date
                                        var endTimeString = "@endTimeString";
                                        var endTime = new Date(endTimeString).getTime(); // Target date and time
                                        var now = new Date().getTime(); // Get the current date and time dynamically

                                        var timeDifference = endTime - now;

                                        if (timeDifference <= 0) {
                                            document.getElementById("countdown").innerHTML = "@localizedCountdownExpired";
                                        } else {
                                            var days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
                                            var hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                            var minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));
                                            var seconds = Math.floor((timeDifference % (1000 * 60)) / 1000);

                                            // Update the countdown element with formatted time
                                            document.getElementById("countdown").innerHTML = days + " @localizedDays " + hours + " @localizedHours "
                                                + minutes + " @localizedMinutes " + seconds + " @localizedSeconds ";
                                        }
                                    }

                                    // Update the countdown every second
                                    setInterval(updateCountdown, 1000);
                                    // Initial call to display the countdown immediately
                                    updateCountdown();
                                </script>


                            </div>
                            <div class="deals-products col-md-8 col-lg-9 col-xl-9_5 deals-right-contents">
                                <div class="title" id="dealoftheday-title-1"><strong>@Localizer["Dealofthedays"]</strong></div>
                                <div class="deal-carousel-container" data-dealcarouselid="1">
                                    <div class="title" id="dealoftheday-title">
                                        <div class="swiper-nav">
                                            <div class="swiper-button-next icon-right-arrow-2"></div>
                                            <div class="swiper-button-prev icon-left-arrow-2"></div>
                                        </div>
                                    </div>
                                    <div class="product-horizontal swiper carousel" id="deal-carousel">
                                        <div class="swiper-wrapper">
                                            @for (int i = 0; i < Model.ListOfProductsDealOfTheDays.Count; i += 2)
                                            {
                                                <div class="swiper-slide col-6 col-xs-6 col-md-4 col-lg-3 col-xl-2_5">
                                                    @for (int j = i; j < i + 2 && j < Model.ListOfProductsDealOfTheDays.Count; j++)
                                                    {
                                                        var product = Model.ListOfProductsDealOfTheDays[j];
                                                        var name = culture.StartsWith("en") ? product.Product.NameEn : product.Product.NameAr;
                                                        <div class="product-item" data-productid="@product.Product.Id">
                                                            <div class="picture">
                                                                <div class="offer-content product-ribbon" style="max-width: 60px;">
                                                                    @if (product.Flags.Any(f => f.FlagType == "New"))
                                                                    {
                                                                        <div class="new-product-label">@product.Flags.First(f => f.FlagType == "New").FlagType</div>
                                                                    }
                                                                    @if (product.Flags.Any(f => f.FlagType == "Sale"))
                                                                    {
                                                                        <div class="ribbon ribbon-danger" style="background-color:red">@product.Flags.First(f => f.FlagType == "Sale").FlagType</div>
                                                                    }
                                                                    @if (product.Flags.Any(f => f.FlagType == "Feature"))
                                                                    {
                                                                        <div class="new-product-label" style="background-color:dodgerblue">@product.Flags.First(f => f.FlagType == "Feature").FlagType</div>
                                                                    }
                                                                </div>

                                                                <div class="swiper" id="swiper-@product.Product.Id-deal">
                                                                    <div class="swiper-wrapper">
                                                                        @foreach (var item in product.Product.Images)
                                                                        {
                                                                            <a class="swiper-slide padding-b" asp-controller="Products" asp-action="Detail" asp-route-id="@item.Product.Id" title="test">
                                                                                <img alt="test" src="~/uploads/@item.ImagePath" title="@Localizer["ShowDetailsFor"]  Cabbage, Green" />
                                                                            </a>
                                                                        }
                                                                    </div>
                                                                    <!-- Add Pagination -->
                                                                    <div class="swiper-pagination"></div>
                                                                </div>
                                                                <script>
                                                                    document.addEventListener('DOMContentLoaded', function () {
                                                                        var mySwiper = new Swiper('#swiper-@product.Product.Id-deal', {
                                                                            pagination: {
                                                                                clickable: true,
                                                                                el: '.swiper-pagination',
                                                                            },
                                                                        });
                                                                    });
                                                                </script>
                                                                <div class="buttons">
                                                                    <button type="button" class="button-2 add-to-wishlist-button AddToWishlistWithOneQty" data-product-Id="@product.Product.Id" title="@Localizer["AddToWishlist"]">@Localizer["AddToWishlist"]</button>
                                                                    <button type="button" class="button-2 quick-view-btn" data-product-Id="@product.Product.Id" title="@Localizer["QuickView"]">
                                                                        <i class="fa-sharp fa-light fa-magnifying-glass-plus"></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            <div class="details">
                                                                <h2 class="product-title">
                                                                    <a asp-controller="Products" asp-action="Detail" asp-route-id="@product.Product.Id">@name</a>
                                                                </h2>
                                                                <div class="description" data-short-description="none">
                                                                    @product.Product.DescriptionEn
                                                                </div>
                                                                <div class="add-info">
                                                                    <div class="prices">
                                                                        @if (@product.Product.Flags.Any(f => f.FlagType == "Sale"))
                                                                        {
                                                                            <span class="price old-price">@product.Product.Price @Localizer["JOD"]</span>
                                                                            <span class="price actual-price">@product.Product.PriceAfterDiscount @Localizer["JOD"]</span>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="price actual-price">@product.Product.Price @Localizer["JOD"]</span>
                                                                        }
                                                                    </div>
                                                                    <div class="add-to-cart">
                                                                        <a asp-controller="Products" asp-action="Detail" asp-route-id="@product.Product.Id" class="button-1 add-to-cart-button">@Localizer["AddToCart"]</a>
                                                                        <div class="qty-input-wrap ">
                                                                            <button type="button" class="qty-btn qty-minus" value="-1">-</button>
                                                                            <input id="product-quantity" class="qty-input" type="text" aria-label="Enter a quantity" value="1">
                                                                            <button type="button" class="qty-btn qty-plus" value="1">+</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    }
                                                </div>
                                            }
                                        </div>
                                        <div class="swiper-pagination pagination-mobile"></div>
                                    </div>
                                    <script>
                                        $(document).ready(function () {
                                            var carousel = new Swiper("#deal-carousel", {
                                                slidesPerView: "auto",
                                                observer: true,
                                                observeParents: true,
                                                lazy: true,
                                                loop: true,
                                                centeredSlides: false,
                                                initialSlide: 0.00,
                                                on: {
                                                    init: function (swiper) {
                                                        $(document).trigger({ type: "swiper_initialized", swiper: swiper });
                                                    },
                                                },
                                                autoplay: {
                                                    delay: 5000,
                                                    disableOnInteraction: false,
                                                    pauseOnMouseEnter: true,
                                                },
                                                pagination: {
                                                    el: "#deal-carousel .swiper-pagination",
                                                    type: "bullets",
                                                    dynamicBullets: false,
                                                    dynamicMainBullets: 0,
                                                    clickable: false
                                                },
                                                navigation: {
                                                    nextEl: "#dealoftheday-title .swiper-button-next",
                                                    prevEl: "#dealoftheday-title .swiper-button-prev",
                                                },
                                            });
                                        });
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Deal Of The Day -->

                <div class="animer animatedParent carousel-grid carousel-category" data-sequence='300' style="margin-top:50px;">
                    <div class="relative">
                        <div class="bc1"><img class="animated fadeInDownShort" data-id='1' src="~/images/gabrinicosmetics/picture-background.png"></div>
                        <div class="bc2"><img class="animated fadeInDownShort" data-id='2' src="~/images/gabrinicosmetics/picture-girl.png"></div>
                        <div class="bc3"><img class="animated bounceInDown" data-id='3' src="~/images/gabrinicosmetics/picture-text.png"></div>
                        <div class="bc4"><img class="animated growIn sharpen" data-id='4' src="~/images/gabrinicosmetics/product-4.png"></div>
                        <div class="bc5"><img class="animated growIn sharpen" data-id='5' src="~/images/gabrinicosmetics/product-1.png"></div>
                        <div class="bc6"><img class="animated fadeInLeftShort sharpen" data-id='6' src="~/images/gabrinicosmetics/product-2.png"></div>
                        <div class="bc7"><img class="animated fadeInUpShort sharpen" data-id='7' src="~/images/gabrinicosmetics/product-3.png"></div>
                        <div class="bc8"><img class="animated fadeInRightShort sharpen" data-id='8' src="~/images/gabrinicosmetics/product-5.png"></div>
                    </div>
                </div>

                <!-- Product Tabs -->
                <div class="product-tabs-container">
                    <div class="product-tab-grid">
                        <div class="product-tab-grid-item">
                            <div class="product-tab-container" data-producttabid="1">
                                <div class="product-tab-container advance-collection">
                                    <div class="tab-link-container">
                                        <div class="tab-image">
                                            <img src="~/images/gabrinicosmetics/slider-best-sales.png" alt="Product tab " />
                                        </div>
                                    </div>
                                    <div id="product-tab">
                                        <ul>
                                            <li class="init">@Localizer["BestSale"]</li>
                                            <li data-tab-item-id="2" data-loaded><a href="#tab-item-2">@Localizer["BestSale"]</a></li>
                                        </ul>
                                        <div id="tab-item-2">
                                            <div class="product-tab" id="product-tab-item">
                                                <div class="swiper product-tab-swiper">
                                                    <div class="swiper-wrapper item-grid">
                                                        @for (int i = 0; i < Model.ProductsSale.Count; i += 2)
                                                        {
                                                            <div class="item-box item-box-tab swiper-slide">
                                                                @for (int j = i; j < i + 2 && j < Model.ProductsSale.Count; j++)
                                                                {
                                                                    var product = Model.ProductsSale[j];
                                                                    var name = culture.StartsWith("en") ? product.Product.NameEn : product.Product.NameAr;

                                                                    <div class="product-item" data-productid="@product.Product.Id">
                                                                        <div class="picture">
                                                                            <div class="offer-content product-ribbon" style="max-width: 60px;">
                                                                                @if (product.Flags.Any(f => f.FlagType == "New"))
                                                                                {
                                                                                    <div class="new-product-label">@product.Flags.First(f => f.FlagType == "New").FlagType</div>
                                                                                }
                                                                                @if (product.Flags.Any(f => f.FlagType == "Sale"))
                                                                                {
                                                                                    <div class="discount-info-label">@product.Product.PersantageSale% @Localizer["Off"]</div>
                                                                                }
                                                                                @if (product.Flags.Any(f => f.FlagType == "Feature"))
                                                                                {
                                                                                    <div class="new-product-label" style="background-color:dodgerblue">@product.Flags.First(f => f.FlagType == "Feature").FlagType</div>
                                                                                }
                                                                            </div>
                                                                            <div class="offer-content product-ribbon">
                                                                            </div>
                                                                            <div class="swiper" id="swiper-@product.Product.Id-best">
                                                                                <div class="swiper-wrapper">
                                                                                    @foreach (var item in product.Product.Images)
                                                                                    {
                                                                                        <a class="swiper-slide padding-b" asp-controller="Products" asp-action="Detail" asp-route-id="@item.Product.Id" title="@Localizer["ShowDetailsFor"]  @name">
                                                                                            <img alt="@Localizer["PictureOf"] @name" src="~/uploads/@item.ImagePath" title="@Localizer["ShowDetailsFor"] @name" />
                                                                                        </a>
                                                                                    }
                                                                                </div>
                                                                                <!-- Add Pagination -->
                                                                                <div class="swiper-pagination"></div>
                                                                            </div>
                                                                            <script>
                                                                                document.addEventListener('DOMContentLoaded', function () {
                                                                                    var mySwiper = new Swiper('#swiper-@product.Product.Id-best', {
                                                                                        pagination: {
                                                                                            clickable: true,
                                                                                            el: '.swiper-pagination',
                                                                                        },
                                                                                    });
                                                                                });
                                                                            </script>
                                                                            <div class="buttons">
                                                                                <button type="button" class="button-2 add-to-wishlist-button" data-product-Id="@product.Product.Id" title="@Localizer["AddToWishlist"]">@Localizer["AddToWishlist"]</button>
                                                                                <button type="button" class="button-2 quick-view-btn" data-product-Id="@product.Product.Id" title="@Localizer["QuickView"]">
                                                                                    <i class="fa-sharp fa-light fa-magnifying-glass-plus"></i>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                        <div class="details">
                                                                            <h2 class="product-title">
                                                                                <a asp-controller="Products" asp-action="Detail" asp-route-id="@product.Product.Id">@name</a>
                                                                            </h2>
                                                                            <div class="add-info">
                                                                                <div class="prices">
                                                                                    <span class="price old-price">@product.Product.Price @Localizer["JOD"]</span>
                                                                                    <span class="price actual-price">@product.Product.PriceAfterDiscount @Localizer["JOD"]</span>
                                                                                </div>
                                                                                <div class="add-to-cart">
                                                                                    <button type="button" class="button-1 add-to-cart-button" data-product-Id="@product.Product.Id">@Localizer["AddToCart"]</button>
                                                                                    <div class="qty-input-wrap ">
                                                                                        <button type="button" class="qty-btn qty-minus" value="-1">-</button>
                                                                                        <input id="product-quantity" class="qty-input" type="text" aria-label="Enter a quantity" value="1">
                                                                                        <button type="button" class="qty-btn qty-plus" value="1">+</button>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                }
                                                            </div>
                                                        }
                                                    </div>
                                                </div>
                                                <div class="product-tab-nav">
                                                    <div class="swiper-button-next icon icon-right-arrow-2"></div>
                                                    <div class="swiper-button-prev icon icon-left-arrow-2"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="product-tab-grid">
                        <div class="product-tab-grid-item">
                            <div class="product-tab-container" data-producttabid="2">
                                <div class="product-tab-container advance-collection">
                                    <div class="tab-link-container">
                                        <div class="tab-image">
                                            <img src="~/images/gabrinicosmetics/slider-new-collections.png" alt="Product tab" />
                                        </div>
                                    </div>
                                    <div id="product-tab-new">
                                        <ul>
                                            <li class="init">@Localizer["NewCollections"]</li>
                                            <li data-tab-item-id="1" data-loaded><a href="#tab-item-1">@Localizer["NewCollections"]</a></li>
                                        </ul>
                                        <div id="tab-item-1">
                                            <div class="product-tab" id="product-tab-item-New">
                                                <div class="swiper product-tab-swiper">
                                                    <div class="swiper-wrapper item-grid">
                                                        @for (int i = 0; i < Model.ProductsNew.Count; i += 2)
                                                        {
                                                            <div class="item-box item-box-tab swiper-slide">
                                                                @for (int j = i; j < i + 2 && j < Model.ProductsNew.Count; j++)
                                                                {
                                                                    var product = Model.ProductsNew[j];
                                                                    var name = culture.StartsWith("en") ? product.Product.NameEn : product.Product.NameAr;

                                                                    <div class="product-item" data-productid="@product.Product.Id">
                                                                        <div class="picture">
                                                                            <div class="offer-content product-ribbon" style="max-width: 60px;">
                                                                                @if (product.Flags.Any(f => f.FlagType == "New"))
                                                                                {
                                                                                    <div class="new-product-label">@product.Flags.First(f => f.FlagType == "New").FlagType</div>
                                                                                }
                                                                                @if (product.Flags.Any(f => f.FlagType == "Sale"))
                                                                                {
                                                                                    <div class="discount-info-label">@product.Product.PersantageSale% @Localizer["Off"]</div>
                                                                                }
                                                                                @if (product.Flags.Any(f => f.FlagType == "Feature"))
                                                                                {
                                                                                    <div class="new-product-label" style="background-color:dodgerblue">@product.Flags.First(f => f.FlagType == "Feature").FlagType</div>
                                                                                }
                                                                            </div>
                                                                            <div class="swiper" id="swiper-@product.Product.Id-new">
                                                                                <div class="swiper-wrapper">
                                                                                    @foreach (var item in product.Product.Images)
                                                                                    {
                                                                                        <a class="swiper-slide padding-b" asp-controller="Products" asp-action="Detail" asp-route-id="@item.Product.Id" title="@Localizer["ShowDetailsFor"]  @name">
                                                                                            <img alt="@Localizer["PictureOf"] @name" src="~/uploads/@item.ImagePath" title="@Localizer["ShowDetailsFor"] @name" />
                                                                                        </a>
                                                                                    }
                                                                                </div>
                                                                                <!-- Add Pagination -->
                                                                                <div class="swiper-pagination"></div>
                                                                            </div>
                                                                            <script>
                                                                                document.addEventListener('DOMContentLoaded', function () {
                                                                                    var mySwiper = new Swiper('#swiper-@product.Product.Id-new', {
                                                                                        pagination: {
                                                                                            clickable: true,
                                                                                            el: '.swiper-pagination',
                                                                                        },
                                                                                    });
                                                                                });
                                                                            </script>
                                                                            <div class="buttons">
                                                                                <button type="button" class="button-2 add-to-wishlist-button" data-product-Id="@product.Product.Id" title="@Localizer["AddToWishlist"]">@Localizer["AddToWishlist"]</button>
                                                                                <button type="button" class="button-2 quick-view-btn" data-product-Id="@product.Product.Id" title="@Localizer["QuickView"]">
                                                                                    <i class="fa-sharp fa-light fa-magnifying-glass-plus"></i>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                        <div class="details">
                                                                            <h2 class="product-title">
                                                                                <a asp-controller="Products" asp-action="Detail" asp-route-id="@product.Product.Id">@name</a>
                                                                            </h2>
                                                                            <div class="add-info">
                                                                                <div class="prices">
                                                                                    @if (@product.Product.Flags.Any(f => f.FlagType == "Sale"))
                                                                                    {
                                                                                        <span class="price old-price">@product.Product.Price @Localizer["JOD"]</span>
                                                                                        <span class="price actual-price">@product.Product.PriceAfterDiscount @Localizer["JOD"]</span>
                                                                                    }else{
                                                                                        <span class="price actual-price">@product.Product.Price @Localizer["JOD"]</span>
                                                                                    }
                                                                                </div>
                                                                                <div class="add-to-cart">
                                                                                    <button type="button" class="button-1 add-to-cart-button" data-product-Id="@product.Product.Id">@Localizer["AddToCart"]</button>
                                                                                    <div class="qty-input-wrap">
                                                                                        <button type="button" class="qty-btn qty-minus" value="-1">-</button>
                                                                                        <input id="product-quantity" class="qty-input" type="text" aria-label="Enter a quantity" value="1">
                                                                                        <button type="button" class="qty-btn qty-plus" value="1">+</button>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                }
                                                            </div>
                                                        }
                                                    </div>
                                                </div>
                                                <div class="product-tab-nav">
                                                    <div class="swiper-button-next icon icon-right-arrow-2"></div>
                                                    <div class="swiper-button-prev icon icon-left-arrow-2"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Product Tabs -->

                <!-- Slider 2 Grid Ad -->
                <div class="slider-ad-2">
                    @foreach (var item in Model.SlidersAd.Take(2))
                    {
                        <div class="slider-grid">
                            <div class="slider-container">
                                <a href="/@item.Link">
                                    <div class="swiper slider">
                                        <div class="swiper-wrapper">
                                            <div class="swiper-slide">
                                                <div class="slider-image swiper-zoom-container">
                                                    <img src="~/uploads/@item.ImageUrl" title="" alt="">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    }
                </div>
                <!-- End Slider Grid Ad -->
                <!-- Section Feature Products -->
                <div class="carousel-grid carousel-product">
                    <div class="carousel-grid-container">
                        <div class="carousel-title"><strong>@Localizer["FeatureProducts"]</strong></div>
                        <div class="carousel-container" data-carouselid="2">
                            <div class="swiper-button-next swiper-next-Feature"></div>
                            <div class="swiper-button-prev swiper-prev-Feature"></div>
                            <div class="swiper carousel" id="ocarousel-Feature">
                                <div class="swiper-wrapper">
                                    @foreach (var item in Model.ProductsFeature)
                                    {
                                        var name = culture.StartsWith("en") ? item.Product.NameEn : item.Product.NameAr;
                                        <div class="swiper-slide">
                                            <div class="product-item" data-productid="@item.Product.Id">
                                                <div class="picture">
                                                    <div class="offer-content product-ribbon" style="max-width: 60px;">
                                                        @if (item.Product.Flags.Any(f => f.FlagType == "New"))
                                                        {
                                                            <div class="new-product-label">@item.Product.Flags.First(f => f.FlagType == "New").FlagType</div>
                                                        }
                                                        @if (item.Product.Flags.Any(f => f.FlagType == "Sale"))
                                                        {
                                                            <div class="discount-info-label">@item.Product.PersantageSale% @Localizer["Off"]</div>
                                                        }
                                                        @if (item.Product.Flags.Any(f => f.FlagType == "Feature"))
                                                        {
                                                            <div class="new-product-label" style="background-color:dodgerblue">@item.Product.Flags.First(f => f.FlagType == "Feature").FlagType</div>
                                                        }
                                                    </div>
                                                    <div class="swiper" id="swiper-feature-@item.Product.Id">
                                                        <div class="swiper-wrapper">
                                                            @foreach (var img in item.Product.Images)
                                                            {
                                                                <a class="swiper-slide padding-b" asp-controller="Products" asp-action="Detail" asp-route-id="@img.Product.Id" title="@Localizer["ShowDetailsFor"] @name">
                                                                    <img alt="@Localizer["PictureOf"] @name" src="~/uploads/@img.ImagePath" title="@Localizer["ShowDetailsFor"] @name" />
                                                                </a>
                                                            }
                                                        </div>
                                                        <!-- Add Pagination -->
                                                        <div class="swiper-pagination"></div>
                                                    </div>
                                                    <script>
                                                        document.addEventListener('DOMContentLoaded', function () {
                                                            var mySwiper = new Swiper('#swiper-feature-@item.Product.Id', {
                                                                pagination: {
                                                                    clickable: true,
                                                                    el: '.swiper-pagination',
                                                                },
                                                            });
                                                        });
                                                    </script>
                                                    <div class="buttons">
                                                        <button type="button" class="button-2 add-to-wishlist-button" data-product-Id="@item.Product.Id" title="@Localizer["AddToWishlist"]">@Localizer["AddToWishlist"]</button>
                                                        <button type="button" class="button-2 quick-view-btn" data-product-Id="@item.Product.Id" title="@Localizer["QuickView"]">
                                                            <i class="fa-sharp fa-light fa-magnifying-glass-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="details">
                                                    <h2 class="product-title">
                                                        <a asp-controller="Products" asp-action="Detail" asp-route-id="@item.Product.Id">@name</a>
                                                    </h2>
                                                    <div class="add-info">
                                                        <div class="prices">
                                                            @if (item.Product.Flags.Any(f => f.FlagType == "Sale"))
                                                            {
                                                                <span class="price old-price">@item.Product.Price @Localizer["JOD"]</span>
                                                                <span class="price actual-price">@item.Product.PriceAfterDiscount @Localizer["JOD"]</span>
                                                            }
                                                            else
                                                            {
                                                                <span class="price actual-price">@item.Product.Price @Localizer["JOD"]</span>
                                                            }
                                                        </div>
                                                        <div class="add-to-cart">
                                                            <button type="button" class="button-1 add-to-cart-button" data-product-Id="@item.Product.Id">@Localizer["AddToCart"]</button>
                                                            <div class="qty-input-wrap">
                                                                <button type="button" class="qty-btn qty-minus" value="-1">-</button>
                                                                <input id="product-quantity" class="qty-input" type="text" aria-label="Enter a quantity" value="1">
                                                                <button type="button" class="qty-btn qty-plus" value="1">+</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Section Feature Products -->

                <!-- Slider 3 Grid Ad -->
                <div class="slider-ad-3">
                    @foreach (var item in Model.SlidersAd.Skip(2))
                    {
                        <div class="slider-grid">
                            <div class="slider-container">
                            <a href="/@item.Link">
                                <div class="swiper slider">
                                    <div class="swiper-wrapper">
                                        <div class="swiper-slide">
                                            <div class="slider-image swiper-zoom-container">
                                                <img src="~/uploads/@item.ImageUrl" title="" alt="">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            </div>
                        </div>
                    }
                </div>
                <!-- End Slider 3 Grid Ad -->

            </div>
        </div>
    </div>
</div>

<!-- Product Detail Quick View Modal -->
<div id="product-detail" class="mfp-wrap mfp-close-btn-in mfp-auto-cursor quickview-popup mfp-ready" tabindex="-1" style="overflow: hidden auto; display: none;">
    <div class="mfp-container mfp-s-ready mfp-inline-holder">
        <div class="mfp-content">
            <div class="qv-modal" id="qv-modal" style="display: block;">
                <div class="qv-details">
                    <div class="page product-details-page">
                        <div class="page-body">
                            <div class="product-name">
                                <h2 id="product-name" itemprop="name"></h2>
                            </div>
                            <form method="post" id="product-details-form" action="">
                                <div data-productid="">
                                    <div class="product-essential">
                                        <!-- Product pictures -->
                                        <div class="gallery" id="product-gallery">
                                            <!-- Dynamic content will be inserted here -->
                                        </div>
                                        <div class="overview">
                                            <div class="product-overview-content">
                                                <!-- SKU -->
                                                <div class="additional-details">
                                                    <div class="sku">
                                                        <span class="value">@Localizer["Category"]:</span>
                                                        <span class="label" id="product-Category"></span>
                                                    </div>
                                                    <div class="sku">
                                                        <span class="value">@Localizer["SubCategory"]:</span>
                                                        <span class="label" id="product-subCategory"></span>
                                                    </div>
                                                    <div class="sku">
                                                        <span class="value">@Localizer["Product"]:</span>
                                                        <span class="label" id="products"></span>
                                                    </div>
                                                </div>
                                                <!-- Attributes -->
                                                <div class="attributes" id="product-attributes">
                                                    <!-- Dynamic content will be inserted here -->
                                                </div>
                                            </div>
                                            <div class="product-overview-pricing-cart">
                                                <!-- Price & add to cart -->
                                                <div class="prices">
                                                    <div class="product-price">
                                                        <span itemprop="price" id="product-price" class="price-value"></span>
                                                    </div>
                                                </div>
                                                <div class="add-to-cart">
                                                    <div class="add-to-cart-panel">
                                                        <button type="button" id="add-to-cart-button" data-product-id="" class="button-1 add-to-cart-button">
                                                            <i class="icon-cart mr-2"></i> @Localizer["AddToCart"]
                                                        </button>
                                                        <div class="qty-input-wrap">
                                                            <button type="button" class="qty-btn qty-minus" value="-1">-</button>
                                                            <input id="product-quantity" class="qty-input" type="text" aria-label="Enter a quantity" value="1">
                                                            <button type="button" class="qty-btn qty-plus" value="1">+</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Wishlist -->
                                                <div class="overview-buttons">
                                                    <div class="add-to-wishlist">
                                                        <button type="button" data-product-id="" class="button-2 AddToWishlistWithQtyAngImg">
                                                            <i class="icon-heart mr-2"></i> @Localizer["AddtoWishlist"]
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <button title="Close (Esc)" type="button" class="mfp-close">×</button>
            </div>
        </div>
    </div>
</div>

<!-- Wishlist Notification -->
<div id="bar-notification-wishlist" class="bar-notification-container" data-close="Close">
    <div class="bar-notification success" style="display: none;">
        <p class="content">@Localizer["AlertAdded"] <a href="/Wishlist">@Localizer["wishlist"]</a></p>
        <span class="close" title="Close"></span>
    </div>
</div>

<!-- Error Notification -->
<div id="bar-notification-error" class="bar-notification-container" data-close="Close">
    <div class="bar-notification error" style="display: none;">
        <p class="content">@Localizer["PleaseSelectColor"]</p>
        <span class="close" title="Close"></span>
    </div>
</div>

<script>
    // Update Product Detail Modal
    function updateProductDetailModal(product) {

        var culture = "@culture";
        if (culture.startsWith("en")) {
            var PNameEn = product.product.nameEn;
            var CNameEn = product.product.subcategory.category.nameEn;
            var SCNameEn = product.product.subcategory.nameEn;
        } else {
            var PNameEn = product.product.nameAr;
            var CNameEn = product.product.subcategory.category.nameAr;
            var SCNameEn = product.product.subcategory.nameAr;
            var SCNameEn = product.product.subcategory.nameAr;
        }
        $('#product-name').text(PNameEn);
        $('#product-Category').text(CNameEn);
        $('#product-subCategory').text(SCNameEn);
        $('#products').text(PNameEn);
        $('#product-quantity').val(1);

        const localizerJOD = "JOD";
        const gallery = $('#product-gallery');
        gallery.empty();

        // Add the <dt> and <dd> tags once
        gallery.append(`
                        <div id="wrap" style="top:0px;z-index:9999;position:relative;">
                            <img alt="@Localizer["PictureOf"] ${PNameEn}" src="${window.location.origin}/uploads/${product.product.images.$values[0].imagePath}" title="@Localizer["PictureOf"] ${PNameEn}" style="height: auto; width: 100%; border-width: 0px; display: block;" class="cloud-zoom-image cloud-zoom-image-size" width="400" id="dbrandImage">
                        </div>
                    `);

        product.product.images.$values.forEach(image => {
            gallery.append(`
                            <div class="cloud-zoom-thumb" style="margin-top:16px">
                                <a href="${window.location.origin}/uploads/${image.imagePath}" rel="lightbox-p" class="src-zoom-anchor" onclick="return false;">
                                    <img src="${window.location.origin}/uploads/${image.imagePath}" alt="Product Image" class="src-zoom-image">
                                </a>
                            </div>
                        `);
        });

        function changeMainImage(newSrc) {
            document.getElementById('dbrandImage').src = newSrc;
        }

        $(".cloud-zoom-thumb a").on("click", function () {
            const newSrc = $(this).attr('href');
            changeMainImage(newSrc);
        });

        const attributes = $('#product-attributes');
        attributes.empty();

        // Add the <dt> and <dd> tags once
        attributes.append(`
                        <dt>
                            <label class="text-prompt">@Localizer["Colors"]</label>
                            <span class="required">*</span>
                        </dt>
                        <dd>
                            <ul class="option-list attribute-squares color-squares attribute-circle" style="direction:ltr">
                            </ul>
                        </dd>
                    `);

        // Append the <li> items inside the <ul> element
        const ulElement = attributes.find('ul');

        product.product.colors.$values.forEach(attribute => {
            const listItem = `
                            <li>
                                <label for="product_attribute_${attribute.id}" style="display:flex">
                                    <input id="product_attribute_${attribute.id}" type="radio" name="product_color" value="${attribute.id}" data-color-name="${attribute.colorName}" style="margin-right: 10px; display:block">
                                    <span class="attribute-square-container">
                                        <span class="attribute-square" style="background-color:${attribute.colorName};">&nbsp;</span>
                                    </span>
                                </label>
                            </li>
                        `;
            ulElement.append(listItem);
        });

        // Set the data-product-id attribute for the Add to wishlist button
        $('.AddToWishlistWithQtyAngImg').attr('data-product-id', product.product.id);
        $('#add-to-cart-button').attr('data-product-id', product.product.id);

        // Update price based on flags
        const priceElement = $('#product-price');
        priceElement.empty(); // Clear previous price content

        if (product.product.flags.$values.some(flag => flag.flagType === 'Sale')) {
            priceElement.append(`
                            <div class="prices">
                                <div class="old-product-price">
                                    <span>Old price:</span>
                                    <span>${product.product.price} ${localizerJOD}</span>
                                </div>
                                <div class="product-price">
                                    <label>Price:</label>
                                    <span class="price-value">${product.product.priceAfterDiscount} ${localizerJOD}</span>
                                </div>
                            </div>
                        `);
        } else {
            priceElement.append(`
                        <div class="product-price">
                            <label>Price:</label>
                            <span itemprop="price" class="price-value">${product.product.price} ${localizerJOD}</span>
                        </div>
                        `);
        }
    }

    $(document).ready(function () {

        // Carousel Sliders Banner
        var carousel = new Swiper("#slider-banner", {
            spaceBetween: 0,
            observer: true,
            observeParents: true,
            lazy: true,
            loop: true,
            autoHeight: false,
            allowTouchMove: false,
            initialSlide: 0.00,
            direction: "horizontal",
            on: {
                init: function (swiper) {
                    $(document).trigger({ type: "swiper_initialized", swiper: swiper });
                },
            },
            autoplay: {
                delay: 5000,
                disableOnInteraction: false,
                pauseOnMouseEnter: false,
            },
            navigation: {
                nextEl: "#slider-banner .swiper-button-next",
                prevEl: "#slider-banner .swiper-button-prev",
            },
        });

        // Carousel Category
        var carouselCategory = new Swiper("#ocarousel", {
            observer: true,
            observeParents: true,
            breakpoints: {
                0: { slidesPerView: 2.5, spaceBetween: 10 },
                480: { slidesPerView: 3.5, spaceBetween: 10 },
                767: { slidesPerView: 4, spaceBetween: 12 },
                1024: { slidesPerView: 5, spaceBetween: 12 },
                1200: { slidesPerView: 5, spaceBetween: 12 },
            },
            lazy: true,
            loop: true,
            centeredSlides: false,
            initialSlide: 0.00,
            on: {
                init: function (swiper) {
                    $(document).trigger({ type: "swiper_initialized", swiper: swiper });
                },
            },
            autoplay: {
                delay: 5000,
                disableOnInteraction: false,
                pauseOnMouseEnter: true,
            },
            navigation: {
                nextEl: ".swiper-next",
                prevEl: ".swiper-prev",
            },
        });

        // Tab Products
        $("#product-tab").tabs();
        var tabItem = new Swiper("#product-tab-item .product-tab-swiper", {
            observer: true,
            observeParents: true,
            slidesPerView: 'auto',
            lazy: true,
            loop: true,
            centeredSlides: false,
            autoplay: {
                delay: 5000,
                disableOnInteraction: false,
                pauseOnMouseEnter: true,
            },
            navigation: {
                nextEl: "#product-tab-item .product-tab-nav .swiper-button-next",
                prevEl: "#product-tab-item .product-tab-nav .swiper-button-prev",
            },
        });

        // Tab New Products
        $("#product-tab-new").tabs();
        var tabItemNew = new Swiper("#product-tab-item-New .product-tab-swiper", {
            observer: true,
            observeParents: true,
            slidesPerView: 'auto',
            lazy: true,
            loop: true,
            centeredSlides: false,
            navigation: {
                nextEl: "#product-tab-item-New .product-tab-nav .swiper-button-next",
                prevEl: "#product-tab-item-New .product-tab-nav .swiper-button-prev",
            },
        });

        // Feature Products
        var carouselFeature = new Swiper("#ocarousel-Feature", {
            observer: true,
            observeParents: true,
            spaceBetween: -1,
            breakpoints: {
                0: { slidesPerView: 2, spaceBetween: 0 },
                480: { slidesPerView: 3 },
                767: { slidesPerView: 4 },
                1024: { slidesPerView: 5 },
            },
            lazy: true,
            loop: true,
            centeredSlides: false,
            initialSlide: 0.00,
            on: {
                init: function (swiper) {
                    $(document).trigger({ type: "swiper_initialized", swiper: swiper });
                },
            },
            autoplay: {
                delay: 5000,
                disableOnInteraction: false,
                pauseOnMouseEnter: true,
            },
            navigation: {
                nextEl: ".swiper-next-Feature",
                prevEl: ".swiper-prev-Feature",
            },
        });
    });

    // Wishlist button click handler
    $(".AddToWishlistWithOneQty").on("click", async function () {
        var productId = $(this).attr('data-product-id');
    @if (User.Identity.IsAuthenticated)
    {
        <text>
                    try {
                var response = await fetch(`/WishList/AddItem?productId=${productId}`);
                if (response.status == 200) {
                    // Show the success notification
                    $('#bar-notification-wishlist .bar-notification.success').show();
                    // Wait for 2 seconds
                    setTimeout(function () {
                        // Reload the page after 2 seconds
                        location.reload();
                    }, 2000);
                }
            } catch (err) {
                console.error('Error:', err);
            }
        </text>
    }
    else
    {
        <text>window.open("/Account/Login", "_self"); </text>
    }
    });

    // Add to cart button click handler
    $('.add-to-cart-button').on('click', function () {
        var productId = $(this).attr('data-product-id');
        window.location.href = `/Products/Detail?Id=${productId}`;
    });

    // Add to wishlist button click handler
    $('.add-to-wishlist-button').on('click', function () {
        var productId = $(this).attr('data-product-id');
        window.location.href = `/Products/Detail?Id=${productId}`;
    });

    // Wishlist button with quantity and image click handler
    $(".AddToWishlistWithQtyAngImg").on("click", async function () {
        var productId = $(this).attr('data-product-id');
        var qty = $('.qty-input').val();
        var img = $('#dbrandImage').attr('src').split('/').pop();
        var selectedColor = $('input[name="product_color"]:checked');

        // Ensure selectedColor is not null or undefined
        var colorName = selectedColor.length ? selectedColor.data('color-name').replace('#', '') : '';

        if (!colorName) {
            $('#bar-notification-error .bar-notification.error').show();
            return; // Exit the function if colorName is missing
        }
    @if (User.Identity.IsAuthenticated)
    {
        <text>
                    try {
                var response = await fetch(`/WishList/AddItemWithQtyAndImage?productId=${productId}&qty=${qty}&image=${img}&color=${colorName}`);
                if (response.status == 200) {
                    // Show the success notification
                    $('#bar-notification-error .bar-notification.error').hide();
                    $('#bar-notification-wishlist .bar-notification.success').show();
                    // Wait for 2 seconds
                    setTimeout(function () {
                        // Reload the page after 2 seconds
                        location.reload();
                    }, 2000);
                }
            } catch (err) {
                console.error('Error:', err);
            }
        </text>
    }
    else
    {
        <text>window.open("/Account/Login", "_self"); </text>
    }
    });

    // Quick View Button click handler
    $(document).on('click', '.quick-view-btn', async function () {
        const productId = $(this).data('product-id');
        try {
            const response = await fetch(`/Products/GetProductById/${productId}`);
            if (response.status == 200) {
                const product = await response.json();
                updateProductDetailModal(product);
                $('#product-detail').show();
            } else {
                console.error('Failed to fetch product details');
            }
        } catch (err) {
            console.error('Error:', err);
        }
    });

    // Close product detail modal
    $('.mfp-close').on('click', function () {
        $('#product-detail').hide();
    });
</script>

